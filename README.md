# finworkers
  В эту дирректорию будут загружаться все механики, необходимые для того, чтобы сыграть в игру "Финансовые воротилы". Здесь находтся описание взаимодействий механик в ходе игры.
  Вначале игры у каждого игрока появляется начальный капитал. Также нам нужно постоянно изменять данные игрока и хранить их. Поэтому у нас есть механика, в которой создается база данных с информацией для каждого игрока(**player.py**). Для каждого игрока создаётся словарь с записями. Для каждого игрока хранится информация о колличестве его денег(**'money'**), обычных фабрик(**'factory'**), автоматических фабрик(**'autoFactory'**), ЕСМ и ЕГП(**'esm', 'egp'**), строительств(**'buildings'**). В записи строительств содержится информация о том, сколько у игрока сторится обычных фабрик(**'bfactory'**), автоматизированных фабрик(**'bAFactory'**) и через сколько построится та или иная фабрика(**'DLf'** - для обычной фабрики, **'DLaf'** - для автоматизированной фабрики), а также через сколько автоматизируется обычная фабрика(**'upgrade'**), если есть фабрики, которые автоматизируются. Также здесь содержится список ссуды('loans'), в котором  информация о том, сколько у игрока ссуд(**'qnt'**), и когда ему необходимо их выплатить(**'DL'**). 
  
  Начальная ситуация. У каждого игрока в начале игры есть определенное количество ресурсов. Оно одинаковое для всех игроков. Каждый игрок (президент компании) получает две обычные фабрики, четыре единицы сырья и материалов (сокращенно ЕСМ), две единицы готовой продукции (сокращенно ЕГП) и 10000 долл. наличными. Игроки занумерованы от 1 до N, и в первом круге игрок 1 — старший. С каждым кругом (т. е. ежемесячно) роль старшего переходит к следующему по порядку номеров игроку, после N-го старшим становится опять первы
  
  Теперь приступим к описанию игрового процесса.
  
  В игровой цикл входит 
> 1. Постоянные издержки. 
> 2. Определение обстановки на рынке.
> 3. Заявки на сырье и материалы. 
> 4. Производство продукции.
> 5. Продажа продукции.
> 6. Выплата ссудного процента.
> 7. Погашение ссуд.
> 8. Получение ссуд.
> 9. Заявки на строительство
Все пункты цикла выполняются последовательно.

Для всех пунктов игрового цикла у нас предусмотренны 11 механик. Про первую механику мы рассказывали в самом начале.
Механики игры:
> 1) База данных с данными игроков
> 2) Постоянные издержки
> 3) Обстановка на рынке(сюда же входит переход по уровням, и сюда же входит определение старшего игрока)
> 4) Заявки на ЕСМ
> 5) Производство(учитывая фабрики)
> 6) Продажа ЕГП
> 7) Выплата ссудного процента
> 8) погашение ссуд
> 9) Получение ссуд
> 10) Заявки на строительство
> 11) Результаты игры

Каждая механика написана в отдельном файле и вызывается в нужный момент в файле main.py
Теперь подробно рассмотрим работу оставшихся механик.

##### 2. Постоянные издержки(**costs.py**):
  
  В этой механике с игроков списываются постоянные издержки. В файле в функция(monthlyCosts()) проходит по записям каждого игрока, и для каждого игрокам  считает сумму долларов, которую им необходимо заплатить(allCosts). Необходимо заплатить 300 долл. за каждую имеющуюся у него ЕСМ, 500 долл. за каждую наличную ЕГП, 1000 долл. за владение каждой обычной фабрикой и 1500 долл. — за владение автоматизированной. Это постоянные ежемесячные издержки каждого игрока, даже если он в этом круге не предпринимает никаких других действий.
  
##### 3. Обстановка на рынке(**tabl.py**):
  
  В каждом месяце на рынке покупок ЕСМ и продажи ЕГП разная обстановка. Банк решает и сообщает игрокам, сколько ЕСМ продаст в этот раз и какова их минимальная цена. Объявляется также, сколько ЕГП в общей сложности будет закуплено и какова максимальная цена. Обстановка зависит от уровня, который определяется по определенным правилам. Каждому уровню соответствует свое количество ЕСМ и ЕГП, а также цены на них. Нулевому месяцу соответствует 3 уровень. Для определения уровня мы используем функцию **lvlCount(lvl)**, которой на вход подается текущий уровень(**lvl**)(как он работает). После определения уровня определяется обстановка на рынке, информация о которой содержится в матрице a. В соответствии с обстановкой на рынке игроки должны продумывать стратегию своей игры, тоесть сколько ЕСМ они закупят в этом месяце и сколько ЕГП продадут.
  
##### 4. Заявки на ЕСМ(**Esm.py**):
  В этой механике производится приобритение Единиц Сырья и Материалов. Каждый игрок должен оставить заявку, в которой указывает, сколько ЕСМ он хочет закупить в этом месяце и по какой цене. В механике в функции **AcquisitionOfEsm(Lvl)** запрашивается количество ЕСМ, которое хочет приобрести игрок и проверяется сможет ли он купить столько(то есть доступно ли столько ЕСМ к покупке на данном уровне, и хватает ли у игрока денег для того, чтобы купить необходимое ему количество). Этот файл отсылается к функции(**satisfactionEsm(Lvl, rmngESM)**) внутри вспомогательной механики(**mix.py**), которая реализует процедуру удовлетворения заявок. Она сортирует их в соответствии с приоритетом игры(в порядке убывания предложенной цены. Если сырья не хватает на всех, заявки с предложением более низкой цены не удовлетворяются. При прочих равных условиях сырье достается самому старшему игроку. Игроки платят за сырье при его получении. Банк не сохраняет оставшееся после удовлетворения заявок сырье на следующий месяц), распределяет их между игроками и списывает с них деньги.

##### 5. Производство Продукции(**production.py**):
   Все игроки по очереди объявляют, сколько ЕСМ они собираются переработать в ЕГП в текущем месяце и на каких фабриках. Каждый игрок обязан тут же покрыть расходы на производство. Функция **productionEgp()** спрашивает у игрока, хочет ли он производить ЕГП в этом месяце и проверяет сможет ли он это сделать(хватает ли ему ЕСМ и фабрик).

##### 6. Продажа продукции
